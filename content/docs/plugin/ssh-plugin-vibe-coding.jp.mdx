---
title: "Vibe コーディングチュートリアル：Cursorを使ったSSHプラグインの構築"
description: サーバー管理のためのコードレスアプローチ
---


## はじめに
先月、Difyはプラグイン機能を備えたv1.0.0をリリースしました。この記事では、サーバー管理機能を実現するためにDify用のSSHプラグインを構築する方法を紹介します。

プラグインリポジトリは[GitHub](https://github.com/stvlynn/SSH-Dify-Plugin)で入手できます。

## Manus AIからのインスピレーション
SSHプラグインは、Manus AIの「コンピュータ使用」機能からインスピレーションを得ており、特にサーバー管理用に適応されています。Manus AIは、高度な「ブラウザ使用」と「コンピュータ使用」統合を活用して、自律的にタスクを実行できる点で従来のチャットボットとは一線を画しています。

![image.png](https://s2.loli.net/2025/05/12/V7kMFmTYtsUqx6Q.png)

Manus AIから着想を得た2つの重要なアイデアは次のとおりです：

サーバーインタラクション：Manusの「コンピュータ使用」機能をサーバー管理に変換。

エージェント駆動のタスク計画：AIエージェントを採用してタスクを効率的に管理・実行。

## SSHプラグインの概要
SSHプラグインは、リモートコマンド実行と安全なファイル転送を容易にし、Manus AIの「コンピュータ使用」の概念をリモートサーバーインタラクションに効果的に適応させます。セキュアでないネットワーク上での安全な通信のための業界標準方法であるSSHプロトコルを活用することで、このプラグインはAIエージェントが独立してサーバーの設定、アプリケーションのデプロイ、トラブルシューティング操作などのタスクを管理できるようにします。

![image.png](https://s2.loli.net/2025/05/12/zK7URIC6a5Fk3Yt.png)

## インストール
プラグインはDifyマーケットプレイスで「SSH」を検索するだけで簡単にインストールできます。

![image.png](https://s2.loli.net/2025/05/12/7JMNsuo4ajSnBDk.png)

## 開発プロセス
プラグイン開発プロセスでは、Cursorというコーディング経験がない人でもプラグインを簡単に構築できるように効率を大幅に向上させるLLM駆動の開発ツールを活用しています。

### ステップバイステップガイド：
1. 準備

Cursorをインストールし、サブスクリプションを完了するか、LLM APIを統合します。

新しいプロジェクトを作成し、AIペイン（⌥Option+⌘Command+B）を開き、「エージェントモード」に切り替えます。

![image.png](https://s2.loli.net/2025/05/12/wWNPcisZS8tdeXL.png)

@を入力し、URL：https://docs.dify.ai/ を入力してDifyドキュメントを追加します。

![image.png](https://s2.loli.net/2025/05/12/GW9QE8VoKh5HnCc.png)

設定→機能から「Yoloモード」を有効にして、コマンド実行を簡素化します（注意して使用してください）。

![image.png](https://s2.loli.net/2025/05/12/jyJNhsPfQvYcL6q.png)

2. プラグイン作成

新しいターミナルを開きます（ターミナル→新しいターミナル）。

Difyが提供するプラグインスキャフォールドを使用して新しいプラグインを作成し、設定プロンプトに従います。

3. 開発とデバッグ

Cursorに次のプロンプトを入力します：

```
Difyドキュメントのプラグイン開発セクションを読んでください。
すでに@sshでスキャフォールドを使用してプラグインプロジェクトを作成しました。
このプロジェクトに基づいてSSHプラグインを開発してください
```

## サーバー管理チャットフローの作成
Difyでワークフローを設計することで、サーバー管理を効率的に処理できます。推奨される構造は次のとおりです：

![image.png](https://s2.loli.net/2025/05/12/bFQDxyofqLu9cUl.png)

### ワークフローコンポーネント
#### タスク計画
- Markdown形式でタスクリストを生成します（`[ ]`は保留中のタスクを示します）。

- 効率的な実行のためにタスクに優先順位を明確につけます。

### 実行ループ
ループには次のステップが含まれます：

1. タスク読み取り：保留中のタスクを識別し、対応するSSHコマンドを生成します。

2. SSH実行：SSHを介してリモートでコマンドを実行します。

3. 結果の記録：コマンド結果を保存し、IPアドレスなどの重要な詳細を抽出します。

4. タスク更新：

- 発生した問題を解決するための新しいタスクを作成します。

- 完了したタスクを`[x]`でマークします。

5. 完了チェック：すべてのタスクが完了しているか確認し、すべてのタスクが完了（[x]）としてマークされたらループを終了します。

### レスポンスノード
技術的な理解を必要とせず、自然言語で明確にユーザーに結果を伝えます。

このワークフローにより、AIは自律的にサーバータスクを管理し、問題に効果的に対処し、結果をユーザーに明確に伝えることができます。これで、Difyのエージェンティックワークフローを使用して、クラウドサーバーを簡単に管理できます！

- 自動デプロイ：サービスのインストール、設定の更新、アプリケーションの再起動を簡単に行います。

- リモートファイル管理：手動ログインなしでファイルの作成、編集、管理を行います。

- カスタムスクリプトの実行：コマンドの実行、cronジョブの管理、メンテナンスタスクの自動化を行います。

- モニタリングとトラブルシューティング：ログの取得、システムの健全性チェック、問題の即時解決を行います。 